<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<!-- <f:view contentType="text/html" id="fview"> -->

<!-- 	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> -->
<!-- 	<title>Page template with PrimeFaces</title> -->
<!-- 	<ui:debug /> -->
<!-- 	<f:metadata> -->
<!-- 		<ui:insert name="bean" /> -->
<!-- 	</f:metadata> -->


<f:facet name="last">
	<h:outputStylesheet name="css/mytheme.css"></h:outputStylesheet>
	<h:outputStylesheet name="css/mcmatica.css"></h:outputStylesheet>
</f:facet>

<h:head>


</h:head>

<h:body >

<!-- 	<h:form id="form_dialog"> -->
		<p:panel binding="#{bean.dialogsPanel}"></p:panel>	
<!-- 	</h:form> -->

	<p:ajaxStatus onstart="$('#gifloader').show();"		
		oncomplete="$('#gifloader').hide();" />


	<h:form id="form_growl">
		<p:growl id="messages" showDetail="true" autoUpdate="true" />
	</h:form>

		
	<p:layout id="main_fullpage_layout" fullPage="true">
		<p:layoutUnit position="north">
			<ui:include src="commonToolbar.xhtml" />
		</p:layoutUnit>

		<p:layoutUnit id="mcmatica-west-layout" position="west"
			closable="false" collapsible="true" resizable="true" size="30%"
			header="#{mclbl['selectiongrid.header']}" effect="">

			<h:form id="form_grid">
				<ui:include src="commonSelectiongrid.xhtml" />
			</h:form>


		</p:layoutUnit>

		<p:layoutUnit id="mcmatica-center-layout" position="center">
			
			<h:form id="form_main">
				<!-- 					<p:messages autoUpdate="true" id="msgs" showDetail="true" -->
				<!-- 						showSummary="true" /> -->
				<p:remoteCommand id="saveFormMain" name="saveFormMain" process="@form"
					update=":form_grid :form_growl :form_toolbar @form"
					action="#{bean.save}" />
				<p:remoteCommand id="deleteFormMain" name="deleteFormMain" process="@this"
					update=":form_grid :form_growl :form_toolbar @form"
					action="#{bean.delete}" />
				<p:remoteCommand id="cancelFormMain" name="cancelFormMain" process="@this"
					resetValues="true"
					update=":form_grid :form_growl :form_toolbar @form"
					action="#{bean.cancel}" />

				<p:remoteCommand id="newFormMain" name="newFormMain" process="@this"
					update=":form_grid :form_growl :form_toolbar @form"
					actionListener="#{bean.create}" />
				<p:remoteCommand id="nextFormMain" name="nextFormMain" process="@this"
					update=":form_grid :form_growl :form_toolbar @form"
					actionListener="#{bean.next}" />



				<p:remoteCommand name="startEding" process="@form"
					update=":form_grid :form_growl :form_toolbar @form" />


				<p:blockUI widgetVar="myblockui" block="form_main, :form_grid" trigger="newFormMain, saveFormMain, deleteFormMain, cancelFormMain, :form_grid:selctionDatatable" >
					
				</p:blockUI>
				

				<!-- 					<ui:insert name="content" /> -->
				<ui:include src="commonForm.xhtml"></ui:include>
			</h:form>
		</p:layoutUnit>


	</p:layout>

	<script>
		$(document).ready(
				function() {
					var west = $('#mcmatica-west-layout > .ui-widget-content');

					$('#form_grid').find('.ui-datatable-scrollable-body').css(
							'height', max(west.height(), 500) - 115);

					$('#gifloader').hide();
					
				});
	</script>


</h:body>

<!-- </f:view> -->
</html>